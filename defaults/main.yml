---
# Package installation
boundary_install_package: true
boundary_version: '0.1.2'
boundary_autocomplete_state: file # can be changed to absent

# Config files can be customized
boundary_home_directory: '/etc/boundary.d'
boundary_worker_file: '{{ boundary_home_directory }}/boundary-worker.hcl'
boundary_controller_file: '{{ boundary_home_directory }}/boundary-controller.hcl'
boundary_install_directory: "'/usr/bin' if boundary_install_package == true else '{{ boundary_data_directory }}/bin'"

# Database initialization from https://www.boundaryproject.io/docs/installing/no-gen-resources
# Clear this value to pre-populate an example admin, organization, and project in the DB
boundary_db_init_flags: '-skip-initial-login-role'

# Only used if package installation == false
boundary_url: 'https://releases.hashicorp.com/boundary'
boundary_data_directory: '/opt/boundary'

boundary_user: 'boundary'
boundary_group: 'boundary'
boundary_create_account: true

boundary_architecture_map:
  # this first entry seems... redundant (but it's required for reasons)
  amd64: amd64
  x86_64: amd64
  armv7l: arm
  aarch64: arm64
boundary_architecture: "{{ boundary_architecture_map[ansible_architecture] }}"
boundary_os: "{{ ansible_system|lower }}"
boundary_archive: "boundary_{{ boundary_version }}_{{ boundary_os }}_{{ boundary_architecture }}.zip"
boundary_download: '{{ boundary_url }}/{{ boundary_version }}/{{ boundary_archive }}'
boundary_shasums: "boundary_{{ boundary_version }}_SHA256SUMS"
# yamllint disable-line rule:line-length
boundary_zip_url: "{{ boundary_url }}/{{ boundary_version }}/boundary_{{ boundary_version }}_{{ boundary_os }}_{{ boundary_architecture }}.zip"
boundary_checksum_file_url: "{{ boundary_url }}/{{ boundary_version }}/{{ boundary_shasums }}"

# Database
boundary_psql_dbname: boundary

# TLS Listener management
boundary_client_addr: '0.0.0.0'
boundary_tls_disable: true
boundary_cors_enabled: false
boundary_disable_mlock: true
# Keys should be parameter names from https://www.boundaryproject.io/docs/configuration/listener/tcp#tcp-listener-parameters
boundary_tls_api_listener_parameters:
boundary_tls_cluster_listener_parameters: {}

# TLS keys and certificates
boundary_tls_config_path: "{{ boundary_home_directory }}/tls" # used to create directory, or within other values
boundary_tls_ca_file:     "{{ boundary_tls_config_path }}/ca_cert.pem"
boundary_tls_cert_file:   "{{ boundary_tls_config_path }}/client_cert.pem"
boundary_tls_key_file:    "{{ boundary_tls_config_path }}/client_key.pem"

# This has been removed and replaced by a test for each file type
#boundary_tls_copy_keys: true
# in either src_(type)_file or (type)_content

# Copy TLS files from local or remote
boundary_tls_src_path: 'files/tls' # only used within other values below relative to the playbook
boundary_tls_src_ca_file: "{{ boundary_tls_src_path }}/ca_cert.pem"
#boundary_tls_src_ca_remote: false  # true to use remote file
boundary_tls_src_cert_file: "{{ boundary_tls_src_path }}/client_cert.pem"
#boundary_tls_src_cert_remote: false
boundary_tls_src_key_file: "{{ boundary_tls_src_path }}/client_key.pem"
#boundary_tls_src_key_remote: false

# or provided the data from Ansible secret data sources
#boundary_tls_ca_content: secret_provided_value
#boundary_tls_cert_content: secret_provided_value
#boundary_tls_keyt_content: secret_provided_value

# KMS Configuration
boundary_kms_type: 'gcpckms'
